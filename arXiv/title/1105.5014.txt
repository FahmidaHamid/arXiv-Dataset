Evolution of bacterial genomes under horizontal gene transfer